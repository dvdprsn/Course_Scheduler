# You should look at the following URL's in order to grasp a solid understanding
# of Nginx configuration files in order to fully unleash the power of Nginx.
# https://www.nginx.com/resources/wiki/start/
# https://www.nginx.com/res

server {
	listen 80 default_server;
    	listen [::]:80 default_server;
    	server_name 34.130.250.114;
	#return 404;
    	return 301 https://$server_name$request_uri;
}

server {
	listen 443 ssl http2 default_server;
	listen [::]:443 ssl http2 default_server;
	include snippets/self-signed.conf;
	include snippets/ssl-params.conf;
	root /var/www/html;
	index index.html;
	location / {
                try_files $uri $uri/ =404;
        }
	location /api {
        	include uwsgi_params;
        	uwsgi_pass unix:/home/py-env/backend/myproject.sock;
    	}
}
